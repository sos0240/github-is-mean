# Research Log: Brazil CVM
**Generated**: 2026-02-24T14:25:00Z
**Status**: Complete

---

## 1. VERSION INFORMATION

| Component | Current (in requirements.txt) | Latest Available | Action Required |
|-----------|-------------------------------|------------------|-----------------|
| pycvm | >=0.4 | 0.4.1 | OK |

---

## 2. DOCUMENTATION SOURCES

### Primary Source -- pycvm (Unofficial Wrapper)
- **URL**: https://github.com/glourencoffee/pycvm
- **Verified**: 2026-02-24
- **Version**: 0.4.1

### Secondary Source -- CVM Open Data (Government API)
- **URL**: https://dados.cvm.gov.br/api/v1
- **Dataset URL**: https://dados.cvm.gov.br/dados/CIA_ABERTA
- **No key required**

---

## 3. WRAPPER CODE AUDIT

### Mode 1: pycvm (Unofficial Wrapper) -- PRIMARY

| Method | Status | Issue |
|--------|--------|-------|
| Import check | OK | Graceful degradation when not installed |
| `_fetch_via_pycvm()` | VERIFY | Does NOT actually use pycvm API -- downloads CSV directly |

Note: `_fetch_via_pycvm()` has `import pycvm` at top but then downloads CSVs
directly from `https://dados.cvm.gov.br/dados/CIA_ABERTA/DOC/DFP/DADOS/dfp_cia_aberta_{year}.csv`.
This means pycvm is imported but not actually used for data fetching.

### Mode 2: Direct CVM API -- FALLBACK

| Method | Status | Issue |
|--------|--------|-------|
| `list_companies()` | OK | `/cia_aberta` with OData params correct |
| `get_profile()` | OK | Constructs from list_companies results |
| CSV dataset download | OK | Year-based CSV URLs at dados.cvm.gov.br |

### Canonical Field Coverage (via _CVM_ACCOUNT_MAP)
- CVM uses hierarchical account codes (e.g., 3.01 = Revenue)
- Mapping in canonical_translator covers main financial items

---

## 4. REQUIRED FIXES

1. **MINOR**: pycvm is imported but not actually used in `_fetch_via_pycvm()` -- the method
   downloads CSVs directly. Either use pycvm properly or remove the import.
2. **NONE critical** -- both modes functional, gov API endpoints correct

---

## 5. IMPLEMENTATION READINESS

### Recommendation
- READY TO IMPLEMENT -- gov API endpoints correct, field mappings present

---

**END OF RESEARCH LOG**
