# Research Log: Japan EDINET
**Generated**: 2026-02-24T14:22:00Z
**Status**: Complete

---

## 1. VERSION INFORMATION

| Component | Current (in requirements.txt) | Latest Available | Action Required |
|-----------|-------------------------------|------------------|-----------------|
| edinet-tools | >=0.1 | 0.3.0 | UPGRADE -- API completely changed |

**edinet-tools Last Published**: 0.3.0 (current on PyPI)

---

## 2. DOCUMENTATION SOURCES

### Primary Source -- edinet-tools (Unofficial Wrapper)
- **URL**: https://github.com/matthelmer/edinet-tools
- **Verified**: 2026-02-24
- **Version Covered**: 0.3.0

### Secondary Source -- EDINET API v2 (Government API)
- **URL**: https://api.edinet-fsa.go.jp/api/v2
- **Verified**: 2026-02-24 (via repo doc `EDINET Api doc`)
- **Key required**: Yes (Subscription-Key)

---

## 3. VERBATIM CODE SNIPPETS

### 3a. edinet-tools v0.3.0 CURRENT API
**Source**: edinet-tools README (GitHub, verified 2026-02-24)
```python
# COPIED VERBATIM -- this is the REAL API
import edinet_tools

# Look up any company
toyota = edinet_tools.entity("7203")      # By ticker
toyota = edinet_tools.entity("Toyota")    # By name

# Search companies
banks = edinet_tools.search("bank", limit=5)

# Get filings (requires EDINET_API_KEY)
docs = toyota.documents(days=30)

# Get all documents filed on a specific date
all_filings = edinet_tools.documents("2026-01-20")
```

### 3b. Government API -- EDINET v2 Direct
**Source**: EDINET Api doc in repo
```
# Document list
GET https://api.edinet-fsa.go.jp/api/v2/documents.json?date=YYYY-MM-DD&type=2&Subscription-Key=KEY

# Document download
GET https://api.edinet-fsa.go.jp/api/v2/documents/{docID}?type=5&Subscription-Key=KEY
# type=5 is CSV format (if csvFlag==1)
```

---

## 4. BREAKING CHANGES ANALYSIS -- CRITICAL

### edinet-tools API has COMPLETELY CHANGED

**Our wrapper calls (ALL WRONG for v0.3.0):**
```python
edinet_tools.search_companies(name)       # DOES NOT EXIST
edinet_tools.get_supported_companies()    # DOES NOT EXIST
edinet_tools.resolve_company(identifier)  # DOES NOT EXIST
edinet_tools.get_company_info(identifier) # DOES NOT EXIST
edinet_tools.api.get_documents(date)      # DOES NOT EXIST
```

**Correct v0.3.0 API:**
```python
edinet_tools.entity("7203")              # lookup by ticker/name
edinet_tools.search("bank", limit=5)     # search companies
edinet_tools.documents("2026-01-20")     # get filings by date
entity.documents(days=30)                # get entity's filings
doc.parse()                              # parse a document
```

### Government API -- No changes
- EDINET API v2 endpoints unchanged since 2024
- `/documents.json` and `/documents/{docID}` still work

---

## 5. WRAPPER CODE AUDIT

### Mode 1: edinet-tools (Unofficial Wrapper) -- PRIMARY -- COMPLETELY BROKEN

| Method | Status | Issue |
|--------|--------|-------|
| `search_company()` | BROKEN | Calls `edinet_tools.search_companies()` which doesn't exist |
| `_fetch_company_list()` | BROKEN | Calls `edinet_tools.get_supported_companies()` which doesn't exist |
| `get_profile()` | BROKEN | Calls `edinet_tools.get_company_info()` which doesn't exist |
| `_fetch_via_edinet_tools()` | BROKEN | Calls `edinet_tools.resolve_company()` and `edinet_tools.api.get_documents()` which don't exist |

### Mode 2: Direct EDINET API v2 -- FALLBACK -- MOSTLY OK

| Method | Status | Issue |
|--------|--------|-------|
| `_scan_recent_filings_for_companies()` | OK | `/documents.json` endpoint correct |
| `_fetch_via_direct_api()` | OK | CSV download via type=5 correct |
| `_map_edinet_concept()` | OK | JPPFS mapping is comprehensive |

---

## 6. REQUIRED FIXES

1. **CRITICAL**: Replace ALL edinet-tools calls with correct v0.3.0 API:
   - `search_companies(name)` -> `edinet_tools.search(name)`
   - `get_supported_companies()` -> not available, use filing scan
   - `get_company_info(id)` -> `edinet_tools.entity(id)`
   - `resolve_company(id)` -> `edinet_tools.entity(id)`
   - `api.get_documents(date)` -> `edinet_tools.documents(date)`
2. **MINOR**: Update requirements.txt to pin `edinet-tools>=0.3`

---

## 7. IMPLEMENTATION READINESS

### Recommendation
- **UPGRADE REQUIRED** -- edinet-tools wrapper code is entirely non-functional with current library version

---

**END OF RESEARCH LOG**
